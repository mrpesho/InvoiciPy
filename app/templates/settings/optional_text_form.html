{% extends "layout.html" %}

{% block title %}{% if text %}Edit Optional Text{% else %}New Optional Text{% endif %} - InvoiciPy{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{% if text %}Edit Optional Text{% else %}New Optional Text{% endif %}</h1>
</div>

<form method="post">
    <div class="card">
        <div class="form-row">
            <div class="form-group">
                <label for="key">Key *</label>
                <input type="text" name="key" id="key" class="form-control" required
                    value="{{ text.key if text else '' }}"
                    {% if text %}readonly{% endif %}
                    pattern="[a-z0-9_]+"
                    placeholder="e.g., payment_terms">
                <small class="text-muted">Lowercase letters, numbers, and underscores only.</small>
            </div>
            <div class="form-group">
                <label for="label">Label *</label>
                <input type="text" name="label" id="label" class="form-control" required
                    value="{{ text.label if text else '' }}"
                    placeholder="e.g., Payment Terms">
            </div>
        </div>

        <div class="form-group">
            <label for="content">Content *</label>
            <textarea name="content" id="content" class="form-control" rows="4" required
                placeholder="Text that will appear on the invoice">{{ text.content if text else '' }}</textarea>
            <small class="text-muted">You can use placeholders: {bank_name}, {iban}, {swift}</small>
        </div>

        <div class="form-check">
            <input type="checkbox" name="default_enabled" id="default_enabled"
                {% if text and text.default_enabled %}checked{% endif %}>
            <label for="default_enabled">Enable by default on new invoices</label>
        </div>
    </div>

    <div class="actions">
        <button type="submit" class="btn btn-primary">{% if text %}Update{% else %}Create{% endif %}</button>
        <a href="{{ url_for('settings.index') }}" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
