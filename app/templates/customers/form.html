{% extends "layout.html" %}

{% block title %}{% if customer %}Edit Customer{% else %}New Customer{% endif %} - InvoiciPy{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{% if customer %}Edit {{ customer.name }}{% else %}New Customer{% endif %}</h1>
</div>

<form method="post">
    <div class="card">
        <h3 class="mb-2">Company Information</h3>
        <div class="form-row">
            <div class="form-group">
                <label for="name">Display Name *</label>
                <input type="text" name="name" id="name" class="form-control" required
                    value="{{ customer.name if customer else '' }}">
            </div>
            <div class="form-group">
                <label for="legal_name">Legal Name</label>
                <input type="text" name="legal_name" id="legal_name" class="form-control"
                    value="{{ customer.legal_name if customer else '' }}">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label for="legal_number">Registration Number</label>
                <input type="text" name="legal_number" id="legal_number" class="form-control"
                    value="{{ customer.legal_number if customer else '' }}">
            </div>
            <div class="form-group">
                <label for="vat_number">VAT Number</label>
                <input type="text" name="vat_number" id="vat_number" class="form-control"
                    value="{{ customer.vat_number if customer else '' }}">
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" name="email" id="email" class="form-control"
                    value="{{ customer.email if customer else '' }}">
            </div>
        </div>
    </div>

    <div class="card">
        <h3 class="mb-2">Address</h3>
        <div class="form-group">
            <label for="address_line1">Address Line 1</label>
            <input type="text" name="address_line1" id="address_line1" class="form-control"
                value="{{ customer.address_line1 if customer else '' }}">
        </div>
        <div class="form-group">
            <label for="address_line2">Address Line 2</label>
            <input type="text" name="address_line2" id="address_line2" class="form-control"
                value="{{ customer.address_line2 if customer else '' }}">
        </div>
        <div class="form-row">
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" name="city" id="city" class="form-control"
                    value="{{ customer.city if customer else '' }}">
            </div>
            <div class="form-group">
                <label for="state">State/Province</label>
                <input type="text" name="state" id="state" class="form-control"
                    value="{{ customer.state if customer else '' }}">
            </div>
            <div class="form-group">
                <label for="zipcode">Postal Code</label>
                <input type="text" name="zipcode" id="zipcode" class="form-control"
                    value="{{ customer.zipcode if customer else '' }}">
            </div>
            <div class="form-group">
                <label for="country">Country</label>
                <input type="text" name="country" id="country" class="form-control"
                    value="{{ customer.country if customer else '' }}">
            </div>
        </div>
    </div>

    <div class="card">
        <h3 class="mb-2">Billing</h3>
        <div class="form-row">
            <div class="form-group">
                <label for="payment_terms">Payment Terms (days)</label>
                <input type="number" name="payment_terms" id="payment_terms" class="form-control"
                    value="{{ customer.payment_terms if customer else default_payment_terms }}" min="0" max="365">
                <small class="text-muted">Number of days until invoice is due</small>
            </div>
        </div>
    </div>

    <div class="actions">
        <button type="submit" class="btn btn-primary">{% if customer %}Update Customer{% else %}Create Customer{% endif %}</button>
        <a href="{{ url_for('customers.list_customers') }}" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
