{% extends "pdf/base.html" %}

{% block content %}
<div class="header">
    <div class="company-info">
        <h1>{{ company.name }}</h1>
        <p>{{ company.legal_name }}</p>
        <p>{{ company.address }}</p>
        <p>{{ company.zipcode }} {{ company.city }}, {{ company.country }}</p>
        <p>VAT: {{ company.vat_number }}</p>
        {% if company.email %}<p>{{ company.email }}</p>{% endif %}
    </div>
    <div class="invoice-title">
        <h2>INVOICE</h2>
        <div class="invoice-number">{{ invoice.number }}</div>
        <div class="status-badge status-{{ invoice.status }}">{{ invoice.status }}</div>
    </div>
</div>

<div class="parties">
    <div class="party">
        <h3>Bill To</h3>
        <div class="name">{{ customer.name }}</div>
        {% if customer.legal_name %}<p>{{ customer.legal_name }}</p>{% endif %}
        {% if customer.address_line1 %}<p>{{ customer.address_line1 }}</p>{% endif %}
        {% if customer.address_line2 %}<p>{{ customer.address_line2 }}</p>{% endif %}
        <p>{{ customer.city }}{% if customer.state %}, {{ customer.state }}{% endif %} {{ customer.zipcode }}</p>
        <p>{{ customer.country }}</p>
        {% if customer.vat_number %}<p>VAT: {{ customer.vat_number }}</p>{% endif %}
    </div>
</div>

<div class="dates">
    <div class="date-item">
        <label>Issue Date</label>
        <div class="value">{{ invoice.issue_date }}</div>
    </div>
    {% if invoice.delivery_date %}
    <div class="date-item">
        <label>Delivery Date</label>
        <div class="value">{{ invoice.delivery_date }}</div>
    </div>
    {% endif %}
    <div class="date-item">
        <label>Due Date</label>
        <div class="value">{{ invoice.due_date }}</div>
    </div>
</div>

<table>
    <thead>
        <tr>
            <th style="width: 50%">Description</th>
            <th class="number">Qty</th>
            <th>Unit</th>
            <th class="number">Unit Price</th>
            <th class="number">Tax %</th>
            <th class="number">Amount</th>
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            <td>{{ item.description }}</td>
            <td class="number">{{ "%.2f"|format(item.quantity) }}</td>
            <td>{{ item.unit }}</td>
            <td class="number">{{ "%.2f"|format(item.unit_price) }} {{ invoice.currency }}</td>
            <td class="number">{{ "%.0f"|format(item.tax_rate) }}%</td>
            <td class="number">{{ "%.2f"|format(item.line_total) }} {{ invoice.currency }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="totals">
    <table class="totals-table">
        <tr>
            <td>Subtotal:</td>
            <td>{{ "%.2f"|format(totals.subtotal) }} {{ invoice.currency }}</td>
        </tr>
        <tr>
            <td>Tax:</td>
            <td>{{ "%.2f"|format(totals.tax) }} {{ invoice.currency }}</td>
        </tr>
        <tr class="total">
            <td>Total:</td>
            <td>{{ "%.2f"|format(totals.total) }} {{ invoice.currency }}</td>
        </tr>
    </table>
</div>

{% if invoice.notes %}
<div class="notes">
    <h4>Notes</h4>
    <p>{{ invoice.notes }}</p>
</div>
{% endif %}

{% if optional_texts %}
<div class="optional-texts">
    {% for text in optional_texts %}
    <p>{{ text }}</p>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
